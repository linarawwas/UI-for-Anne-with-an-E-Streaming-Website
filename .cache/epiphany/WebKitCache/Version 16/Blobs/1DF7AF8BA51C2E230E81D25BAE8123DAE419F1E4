(self.webpackChunkapester_sdk=self.webpackChunkapester_sdk||[]).push([[523,10],{2125:function(t,e,n){"use strict";n.r(e);n(2419);var i=n(2137),r=n(9351),a=n(484),o=n(6610),s=n(5991),d=n(3349),c=n(379),u=n(6070),l=n(7608),p=n(6156),v=n(7757),f=n.n(v),h=(n(6992),n(1539),n(8783),n(3948),n(285),n(4747),n(9720),n(9714),n(9826),n(9655)),m=n(6642),y=n(8918),g=n(6399),b=n(967),I=n(6092),A=n(709),Z=n(7667),k=n(808),D=n(478);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,l.Z)(t);if(e){var r=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.Z)(this,n)}}var _=function(t){(0,c.Z)(u,t);var e,n=P(u);function u(t,e){var i;return(0,o.Z)(this,u),i=n.call(this),(0,p.Z)((0,d.Z)(i),"model",void 0),(0,p.Z)((0,d.Z)(i),"attrs",void 0),(0,p.Z)((0,d.Z)(i),"items",void 0),(0,p.Z)((0,d.Z)(i),"publisher",void 0),(0,p.Z)((0,d.Z)(i),"publisherId",void 0),(0,p.Z)((0,d.Z)(i),"interactionId",void 0),(0,p.Z)((0,d.Z)(i),"engineName",void 0),(0,p.Z)((0,d.Z)(i),"instanceId",void 0),(0,p.Z)((0,d.Z)(i),"publisherToken",void 0),(0,p.Z)((0,d.Z)(i),"loader",void 0),(0,p.Z)((0,d.Z)(i),"iframe",void 0),(0,p.Z)((0,d.Z)(i),"container",void 0),(0,p.Z)((0,d.Z)(i),"wrapper",void 0),(0,p.Z)((0,d.Z)(i),"linkedInteraction",void 0),(0,p.Z)((0,d.Z)(i),"type",(0,a.Z)(u)),(0,p.Z)((0,d.Z)(i),"isFullscreen",!1),(0,p.Z)((0,d.Z)(i),"eventsTracker",void 0),i.attrs=t,i.instanceId=Z.Z.id(),i.publisherToken=t.publisherToken,i.items=[],i.loader=A.Z.create(m.gw.STRIP),i.iframe=i.generateIFrame(),i.wrapper=i.generateWrapper(),i.container=e,i.container.style.margin="".concat((0,I.m)(i.attrs.margin),"px auto"),i.eventsTracker=i.createEventsTracker(m.gw.STRIP,t.isSandboxMode),i.eventsTracker.sendPosition(),i}return(0,s.Z)(u,[{key:"setStripModel",value:function(t){var e;this.model=t,this.publisherId=t.publisherId,null===(e=this.getEventTracker())||void 0===e||e.setPublisherId(t.publisherId),this.onMediaLoaded()}},{key:"getEventTracker",value:function(){return this.eventsTracker}},{key:"generateSourceUrl",value:function(){var t=this.attrs,e=t.publisherToken,n=t.isPreview,i=t.style,a=t.headerText,o=new URL("".concat("https://faststrip.apester.com"));return"true"===n&&o.searchParams.append("isPreview",n),o.searchParams.append("token",e),o.searchParams.append("instanceId",this.instanceId),o.searchParams.append("sessionId",k.Z.sessionId),o.searchParams.append("canonicalUrl",k.Z.canonicalUrl),o.searchParams.append("headerText",decodeURIComponent(a||"")),Object.entries(i).forEach((function(t){var e=(0,r.Z)(t,2),n=e[0],i=e[1];o.searchParams.append(n,i)})),o}},{key:"generateIFrame",value:function(){var t=document.createElement("iframe");return t.setAttribute("title","Apester - Interactive content"),t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true"),t.setAttribute("id","fast-strip"),t.classList.add("apester-layer-fill"),t.src=this.generateSourceUrl().toString(),t}},{key:"generateWrapper",value:function(){var t=document.createElement("apester-layer");return t.classList.add("apester-layer","strip-layer"),t.appendChild(this.loader),t.appendChild(this.iframe),t}},{key:"removeLoader",value:function(){this.loader.classList.add("apester-hidden")}},{key:"setHeight",value:function(t){this.container.style.height="".concat(t,"px"),this.wrapper.style.height="".concat(t,"px")}},{key:"setPublisher",value:function(t){this.publisher=t}},{key:"setItems",value:function(t){this.items=t}},{key:"loadInteraction",value:(e=(0,i.Z)(f().mark((function t(e,n){var i,r,a,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={interactionId:e,inative:!1,playlist:!1,instanceId:this.instanceId,stripItems:this.items,manualTop:this.attrs.manualTop,manualTopMobile:this.attrs.manualTopMobile,manualTopDesktop:this.attrs.manualTopDesktop,adUnit:this.attrs.adUnit,partner:this.attrs.partner,autoFullScreen:!0,isResultsScreen:!1,loader:!1},a=null!==(i=this.items.find((function(t){return t.interactionId===e})))&&void 0!==i?i:this.items[0],o=new b.Z(a,r,null,this.eventsTracker),this.linkedInteraction=o,o.disappear(),document.body.appendChild(o.wrapper),o.load(),h.Z.Register(new g.Z(o,n)),this.linkedInteraction=o;case 9:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"openInteraction",value:function(t){var e;null!==(e=this.linkedInteraction)&&void 0!==e&&e.iframe.contentWindow?(this.linkedInteraction.appear(),this.linkedInteraction.fullscreen(!1),this.linkedInteraction.sendMessage(t)):(0,D.f_)("Strip interaction not rendered yet")}},{key:"fullscreen",value:function(t){this.linkedInteraction?(this.isFullscreen=!0,this.linkedInteraction.fullscreen(t)):(0,D.f_)("Strip interaction not rendered yet")}},{key:"minimize",value:function(t){this.linkedInteraction?(this.isFullscreen=!1,this.linkedInteraction.minimize(t),this.linkedInteraction.disappear()):(0,D.f_)("Strip interaction not rendered yet")}},{key:"close",value:function(){this.iframe.remove()}},{key:"getModel",value:function(){return this.model}},{key:"sendMessage",value:function(t){var e;null!==(e=this.iframe)&&void 0!==e&&e.contentWindow&&this.iframe.contentWindow.postMessage(t,"*")}}]),u}(y.Z);e.default=_},8705:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return ce}});var i=n(9351),r=n(2137),a=n(6610),o=n(6156),s=(n(1539),n(8674),n(6992),n(8783),n(3948),n(2222),n(7757)),d=n.n(s),c=n(5991),u=(n(4747),n(7941),n(2526),n(7327),n(5003),n(9337),n(2125)),l=(n(2479),n(531)),p=n(808),v=n(4092),f=n(5708),h=n(8659),m=n(4119);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b={da:"companion",da_below:"companion_below",va:"companion",va_below:"companion_below"},I=function(t){return"companion"===t?"above":"below"},A=function(t){return t/m.q4},Z=function(t){var e=(t.data||{}).size;return(p.Z.isMobile?e.mobile:e.desktop)||e},k=function(t){var e,n,i,r,a=null===(e=(0,v.Ct)(t))||void 0===e?void 0:e.getModel(),o=Z(a).width,s=t.wrapper.parentElement,d=s?s.getBoundingClientRect().width:o,c=t.wrapper.getBoundingClientRect().width;return i=Math.min(o,d,c),t.isFullscreen&&!(0,v.ZN)(t)&&(i=p.Z.isMobile?window.innerWidth:c),"custom"===(null===(n=(0,v.Ct)(t))||void 0===n?void 0:n.engineName)&&(i=Math.max(i,p.Z.isMobile?m.dv:m.iG)),i&&0!==i||(i=m.w2,r=A(i)),r&&0!==r||(r=A(i)),{width:i,height:A(i)}},D=function(t,e){return t&&e.enabledOnStrip&&e.stripAUC};var P,_,w=function(t,e,n){var i=e||{},r=i.companionOptions,a=i.countryData,o=r||{},s=o.video,d=o.consentConfigurations,c=s||{},u=c.playerOptions,p=c.additionalSlot;if(u){var v=s.enabled,h=s.companion,m=s.companion_below,y=s.floating;if(v){var A=u.aniviewChannelId,Z=u.aniviewPlayerId,D=(h||{}).enabled,P=(m||{}).enabled,_=(y||{}).enabled;if(D||P||_){var w=function(t,e){var n="below";return t&&(n="above"),e&&(n="floating"),n}(D,_),C=A,x=Z,E=s.videoTag;if(p&&p.location===b[n]&&Object.keys(p).length>1)C=p.videoTag,E=p.videoTag,x=p.aniviewPlayerId,w=I(p.location);else if(!_&&I(b[n])!==w)return;var O=s.provider,S={type:O,adSize:k(t),playerId:x,loadAdOn:(0,f.l7)(s),videoTag:E,channelId:C,countryData:a,playerOption:s,consentConfig:d,companionPosition:w};if(O===l.Z.ANIVIEW_MULTI_PLAYERS){var L=u.aniviewPlayerId2,M=u.aniviewPlayerId3,T=u.aniviewPlayerId4,R=u.aniviewChannelId2,N=u.aniviewChannelId3,z=u.aniviewChannelId4;return g(g({},S),{},{playerId2:L,playerId3:M,playerId4:T,channelId2:R,channelId3:N,channelId4:z})}return S}}}},C=function(t,e){var n,i=((e||{}).companionOptions||{}).video,r=void 0===i?{}:i;return n={},(0,o.Z)(n,h.Z9.VA,w(t,e,h.Z9.VA)),(0,o.Z)(n,h.Z9.VA_BELOW,r.floating&&r.floating.enabled?void 0:w(t,e,h.Z9.VA_BELOW)),n},x=function(t,e){var n=e||{},i=n.companionOptions,r=n.companionLeftOptions,a=n.companionRightOptions,o=n.countryData,s=n.providerReportData,d={};return Object.values(h.Z9).forEach((function(e){var n,c;d[e]=void 0,e===h.Z9.DA_LEFT?c=r:e===h.Z9.DA_RIGHT?c=a:e!==h.Z9.DA&&e!==h.Z9.DA_BELOW||(c=i);var u=(null===(n=c)||void 0===n?void 0:n.settings)||{},l=c||{},p=l.enabled,y=l.enabledOnStrip,I=l.enabledAdCompete,A=l.headerBidding,Z=l.consentConfigurations,k=l.additionalSlot,P=l.isSimulation,_=p&&y&&(0,v.ZN)(t);if(p||_){var w,C,x=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.headerBidding;return(null==n?void 0:n.bidders)&&(null==n?void 0:n.gpt)&&"headerBidding"===(null==e||null===(t=e.settings)||void 0===t?void 0:t.bannerAdProvider)}(c)?c.headerBidding.gpt.path:function(t,e){var n;return(null===(n=t.container)||void 0===n?void 0:n.getAttribute("adunit"))||(D((0,v.ZN)(t),e)?e.stripAUC:e.settings.slot)}(t,c);if(e===h.Z9.DA||e===h.Z9.DA_BELOW)if(k&&k.location===b[e]&&Object.keys(k).length>1)u=g(g({},u),k),x=k.adSlotName;else if((null===(w=u)||void 0===w||null===(C=w.options)||void 0===C?void 0:C.displayCompanionLocation)!==b[e])return;var E=u,O=E.dfp,S=E.options,L=E.auctionCode,M=E.adSlotName,T=E.isSlotPath,R=E.bannerSizes,N=E.bannerSizesStrip,z=E.bannerAdProvider,V=(A||{}).bidders,F=(0,f.l7)(S),U=S.refreshOnClick,B=S.autoRefresh,j=S.autoRefreshTime,q="none"!==U,W={refreshOnClick:q,refreshTime:B&&!q?Math.max(15e3,j):void 0,lockTime:5e3},G=D((0,v.ZN)(t),c)?N:R,Y=(0,v.ZN)(t)?m.Pf:m.Jb,H={dfp:O,type:z.toLowerCase(),sizes:G,gptPath:x,bidders:V,loadAdOn:F,auctionCode:L,adSlotName:M,isSlotPath:T,enabledAdCompete:I,countryData:o,playerOption:c,consentConfig:Z,collapseEmptyDiv:!0,companionRefresh:W,headerBiddingSize:Y,isSimulation:P,providerReportData:s};d[e]=H}})),d},E=function(t,e){var n,i,r;return t&&(null===(n=t[e])||void 0===n?void 0:n.isSimulation)&&(null===(i=t[e].playerOption)||void 0===i||null===(r=i.settings)||void 0===r?void 0:r.bannerSizes)},O=(n(9826),function(t){var e,n,i,r,a;return{midRollSettings:{type:null!==(e=null==t?void 0:t.loadAdOn)&&void 0!==e?e:h.dI.LOAD,configuration:null!==(n=null==t?void 0:t.loadAdOnProps)&&void 0!==n?n:{}},preRollSettings:{type:null!==(i=null==t||null===(r=t.preroll)||void 0===r?void 0:r.loadAdOn)&&void 0!==i?i:h.dI.LOAD,configuration:null==t||null===(a=t.preroll)||void 0===a?void 0:a.loadAdOnProps}}}),S=function(t,e){var n=t.player.type===e,i=t.requests.find((function(t){return"idle"===t.type}));return i?{maxAds:i.options.count,requestTimeout:i.options.timeout,skipTimer:i.options.skipTimer}:{maxAds:n?1:5,requestTimeout:n?30:10}},L=function(t,e){var n=S(t,e);return{maxAds:n.maxAds,requestTimeout:n.requestTimeout,numOfRequests:0,skipTimer:n.skipTimer}},M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=document.createElement(e);return i.classList.add("in-unit"),t.forEach((function(t){i.classList.add(t)})),n&&(i.id=n),i},T=function(t,e){return t.find((function(t){return t.shouldExtractFromUnit&&t.player.type===e}))},R=function(t,e){var n=e.playerOptions,i=e.videoCampaignOptions,r=e.countryData,a=e.providerReportData;if(n){var o=T(n,h.Z9.DA),s=o||{},d=s.player,c=s.timeInView,u=(d||{}).provider||{},l=u.options,f=u.type;if(f){var m=O(o),y=1e3*(c||8),g=l||{},b=g.auctionCode,I=g.dfp,A=g.size,k=g.bidders,D=g.adSlotName,P=g.isSlotPath,_=function(t,e){var n,i=null===(n=t.container)||void 0===n?void 0:n.getAttribute("adunit");if(i)return i;var r=e.bidders&&e.gpt?e.gpt.path:null,a=(0,v.Ct)(t).getModel(),o=Z(a).height,s=e.path,d=e.interstitialPath;return p.Z.isMobile&&o>=480&&d?d:s||r}(t,l),w=L(o,h.Z9.DA),C=i.consentConfigurations;return{dfp:I,idle:w,type:f.toLowerCase(),sizes:A,gptPath:_,bidders:k,loadAdOn:m,adSlotName:D,isSlotPath:P,timeInView:y,countryData:r,auctionCode:b,playerOption:o,consentConfig:C,headerBiddingSize:[[300,250]],adPlacement:h.ZD.IN_UNIT,providerReportData:a}}}},N=function(t,e){var n=e||{},i=n.playerOptions,r=n.videoCampaignOptions,a=n.countryData;if(i){var o=T(i,h.Z9.VA);if(o){var s=o.player.provider,d=s.type,c=s.options,u=c.aniviewChannelId,l=c.aniviewPlayerId,p=c.playerId,v=O(o),f=u,m=l||p,y=p,g=k(t);return{type:d,idle:L(o,h.Z9.VA),adSize:g,loadAdOn:v,playerId:m,videoTag:y,channelId:f,countryData:a,consentConfig:r.consentConfigurations,playerOption:o}}}},z=n(7667),V=n(4585),F=n(1168),U=n(478),B=(n(6699),["5f22a068350c9cabe1eb443e","5ad092c7e16efe17aa4fb822","5de7851072793266fd04a0ce","5d8488205f9d7beb2b9f9fcf","5d8488892853884ab8e400e3","5d8488cd4625b3568f5f15e5","5d8489314644baefe5491828","5d84898c5f9d7b34899f9fd1","5d8489d44644ba54d949182a","5d848a625f9d7b299c9f9fd3","5d848a9a4644ba7c3349182c","5d848ae34625b31bbd5f15ea","5e2597979915bfea17104606","58c551f76a67357e3b4aa944"]);!function(t){t.AD_IN="Ad in",t.PENDING="Pending",t.UP_NEXT="Up next",t.SKIP="Skip",t.SKIP_AD_IN="Skip ad in",t.SPONSORED="Sponsored",t.SPONSORED_AD="Sponsored Ad"}(P||(P={})),function(t){t.AD_IN="Anzeige in",t.PENDING="Gleich",t.UP_NEXT="Es folgt",t.SKIP="Überspringen",t.SKIP_AD_IN="Werbung überspringen in",t.SPONSORED="Anzeige",t.SPONSORED_AD="Anzeige"}(_||(_={}));var j=function(t,e){return B.includes(t)||"de"===e?_:P},q=n(7602),W=n.p+"./assets/iconRightArrow.svg",G="in-unit",Y="in-unit-logo",H="background",K="active",X="in-unit-icon",J="strip",Q="embed",$="in-unit-teaser",tt="teaser-title",et="teaser-text",nt="in-unit-sponsored",it="sponsored-text",rt="in-unit-container",at="in-unit-content",ot="in-unit-footer",st="footer-content",dt="skip",ct="skip-timer-active",ut=50,lt=40,pt=32,vt="skip_text",ft="skip_counter",ht="skip_counter_text",mt="skip_counter_number",yt=function(){var t=(0,r.Z)(d().mark((function t(e){var n,i,r,a=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:10,i=e.querySelector("#".concat(mt)),e&&i){t.next=4;break}return t.abrupt("return");case 4:e.classList.add(ct),r=n;case 6:if(!(r>0)){t.next=14;break}return i.innerHTML="".concat(r),t.next=10,(0,q.Vs)(1e3);case 10:1===r&&(e.classList.remove(ct),i.innerHTML="");case 11:r--,t.next=6;break;case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),gt=(n(9714),n.p+"./assets/logoWhite.svg"),bt=function(t){return"in_unit_footer_".concat(t.toString())},It=function(t,e,n){var i=document.createElement("img");i.alt="Apester Logo",i.src=gt,i.classList.add(G,Y);var r=M([ot],"div",bt(e));r.style.setProperty("height","".concat(ut,"px"));var a=M([ot,H]);r.appendChild(a);var o=M([st]),s=M([ot,$]);o.appendChild(s),r.appendChild(o);var d=M([ot,tt]),c=t.UP_NEXT;d.innerHTML=c,s.appendChild(d);var u,l,p=M([ot,et]);return p.innerHTML=(u=n,(l=document.createElement("span")).innerHTML=u,l.textContent||l.innerText),s.appendChild(p),o.appendChild(i),r},At=function t(e,n,i){var r=n.startTime,a=n.progressTime;requestAnimationFrame((function(n){var o=r||n,s=n-o;s<a?(e.style.setProperty("transform","translateX(-".concat(100-s/a*100,"%)")),t(e,{startTime:o,progressTime:a},i)):i()}))},Zt=function(t,e){return new Promise((function(n,i){if(!t)return i(new Error("progressBarIndicator is undefined"));At(t,e,(function(){return n()}))}))},kt="monetization-display-container",Dt="monetization-video-container",Pt=function(t,e,n,i){var r=M([rt],"div",e===h.Z9.DA?kt:Dt),a=M([at],"div"),o=M([Q],"div",function(t,e){return"in-unit-".concat(e,"-player-").concat(t)}(t,e)),s="calc(100% - ".concat(lt,"px - ").concat(pt,"px)");o.style.setProperty("max-height",s),a.appendChild(o);var d=function(t,e){var n=M([dt],"div","in_unit_skip_".concat(e));n.style.setProperty("height","".concat(lt,"px"));var i=M([vt],"span",vt),r=t.SKIP;if(i.innerHTML="".concat(r),n.appendChild(i),e===h.Z9.VA){var a=M([ft],"div",ft),o=M([ht],"span",ht),s=M([mt],"span",mt),d=t.SKIP_AD_IN;o.innerHTML="".concat(d),a.appendChild(o),a.appendChild(s),n.appendChild(a)}var c=document.createElement("img");return c.classList.add(G,X),c.src=W,c.alt="arrow",n.appendChild(c),n}(n,e);a.appendChild(d);var c=function(t,e){var n=M([nt],"div","in_unit_sponsored_".concat(e));n.style.setProperty("height","".concat(pt,"px"));var i=M([it]),r=t.SPONSORED_AD;return i.innerHTML=r,n.appendChild(i),n}(n,e);a.appendChild(c);var u,l=It(n,e,i);if(a.appendChild(l),r.appendChild(a),e===h.Z9.DA){var p=function(){var t=M(["progress-bar"]),e=M(["progress-indicator"]);return t.appendChild(e),{progressBar:t,indicator:e}}(),v=p.progressBar;u=p.indicator,r.appendChild(v)}return{adContainer:r,embedElement:o,indicatorProgressBar:u}},_t=function(t){var e=null==t?void 0:t.querySelector(".".concat(dt));if(e)return new Promise((function(t){e.onclick=function(){return t({adSkipped:!0})}}))},wt=function(t,e,n,i,r,a){e.classList.add(K);var o=e.querySelector(".".concat(dt));if(o&&yt(o,a),t){e.classList.add(J);var s=parseInt(n.iframe.style.getPropertyValue("max-width"),10),d=parseInt(n.iframe.style.getPropertyValue("height"),10);e.style.setProperty("width","".concat(s,"px")),e.style.setProperty("height","".concat(d,"px")),e.style.setProperty("left","calc(50% - ".concat(s/2,"px)"))}else!function(t,e,n){if(!(t.getBoundingClientRect().height-e.getBoundingClientRect().height-lt-pt>=ut)){var i=t.querySelector("#".concat(bt(n)));null==i||i.remove(),t.style.setProperty("justify-content","center"),t.classList.add("short-unit")}}(e,i,r)},Ct="teaser_text",xt="teaser_counter",Et=function(){var t=(0,r.Z)(d().mark((function t(e){var n,i,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.querySelector("#".concat(Ct)),i=e.querySelector("#".concat(xt)),n&&i){t.next=4;break}return t.abrupt("return");case 4:r=3;case 5:if(!(r>0)){t.next=12;break}return i.innerHTML="".concat(r),t.next=9,(0,q.Vs)(1e3);case 9:r--,t.next=5;break;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ot=function(t,e){var n=M(["countdown"]),i=p.Z.isMobile?"65px":"80px";n.style.setProperty("top",i),e&&n.classList.add("fullscreen");var r=M([],"span",Ct),a=M(["countdown-counter"],"span",xt),o=t.AD_IN;return r.innerHTML="".concat(o),n.appendChild(r),n.appendChild(a),n},St=n(1272);function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tt="teaser-active",Rt=h.Z9.VA,Nt=h.Z9.DA,zt=function(){function t(e,n){var i=this;(0,a.Z)(this,t),(0,o.Z)(this,"videoProvider",void 0),(0,o.Z)(this,"displayProvider",void 0),(0,o.Z)(this,"campaignId",void 0),(0,o.Z)(this,"apesterElement",void 0),(0,o.Z)(this,"id",void 0),(0,o.Z)(this,"translation",void 0),(0,o.Z)(this,"videoContainer",void 0),(0,o.Z)(this,"embedVideoElementId",void 0),(0,o.Z)(this,"displayContainer",void 0),(0,o.Z)(this,"numberOfVideoImpressions",void 0),(0,o.Z)(this,"numberOfDisplayImpressions",void 0),(0,o.Z)(this,"interruptDisplayAdListeners",void 0),(0,o.Z)(this,"videoSettings",void 0),(0,o.Z)(this,"displaySettings",void 0),(0,o.Z)(this,"videoAdSize",void 0),(0,o.Z)(this,"firstVideoRequest",void 0),(0,o.Z)(this,"firstDisplayRequest",void 0),(0,o.Z)(this,"eventTracker",void 0),(0,o.Z)(this,"adFinishedListeners",[]),(0,o.Z)(this,"abTestReportData",void 0),(0,o.Z)(this,"onInterruptDisplayAd",(function(){i.interruptDisplayAdListeners.forEach((function(t){t()})),i.interruptDisplayAdListeners=[]})),(0,o.Z)(this,"waitForDisplayAdInterrupt",(0,r.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){i.interruptDisplayAdListeners.push((function(){return t()}))})));case 1:case"end":return t.stop()}}),t)})))),(0,o.Z)(this,"notifyMonetizationStateToPlayer",(function(t,e){t.sendMessage({type:e?"mon_start":"mon_end"})})),(0,o.Z)(this,"showCountdown",function(){var t=(0,r.Z)(d().mark((function t(e,n){var r,a,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.wrapper.getAttribute(Tt),e.isUserEngaged&&!r&&!i.isAdActive(Nt)&&!i.isAdActive(Rt)){t.next=3;break}return t.abrupt("return");case 3:return a=e.isFullscreen,o=Ot(n,a),e.wrapper.appendChild(o),e.wrapper.setAttribute(Tt,"true"),t.next=9,Et(o);case 9:e.wrapper.removeAttribute(Tt),o.remove();case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,o.Z)(this,"isAdActive",(function(t){var e=t===Rt?i.videoContainer:i.displayContainer;return!!e&&e.classList.contains("active")})),(0,o.Z)(this,"resizeVideo",(function(t){i.videoAdSize=k(t),i.videoProvider.resize(i.videoAdSize)})),(0,o.Z)(this,"destroyAd",(function(){var t,e,n,r,a,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=(null===(t=i.displayProvider)||void 0===t?void 0:t.shouldDestroyAdInsideLoop)&&!o,d=!(null!==(e=i.displayProvider)&&void 0!==e&&e.shouldDestroyAdInsideLoop)&&o;(s||d)&&(null===(n=i.displayProvider)||void 0===n||n.destroy(null===(r=i.displayContainer)||void 0===r?void 0:r.id,!(null!==(a=i.displayProvider)&&void 0!==a&&a.shouldRefreshContainerId())))})),(0,o.Z)(this,"killDisplayAd",(function(t,e){var n,r;i.onInterruptDisplayAd(),i.displayContainer&&(i.isAdActive(Rt)||i.notifyMonetizationStateToPlayer(t,!1),null!==(n=i.displayProvider)&&void 0!==n&&n.shouldDestroyAdInsideLoop&&i.destroyAd(),null!==(r=i.displayProvider)&&void 0!==r&&r.shouldRefreshContainerId()&&i.displayContainer.remove(),i.displayContainer.classList.remove("active"),i.trackEvent(F.C.PLAYER_MON_STOPPED,Nt,void 0,void 0,e))})),(0,o.Z)(this,"killVideoAd",(function(t,e,n){if(i.videoContainer){e&&i.videoProvider.destroy(e,!0),i.videoContainer.classList.remove("active"),i.notifyMonetizationStateToPlayer(t,!1);var r="SKIP"===n?F.C.PLAYER_MON_SKIPPED:F.C.PLAYER_MON_STOPPED;i.trackEvent(r,Rt,void 0,void 0,n)}})),(0,o.Z)(this,"getLoadAdSettings",(function(t,e){var n=t.loadAdOn;return 0===e?n.preRollSettings:n.midRollSettings})),(0,o.Z)(this,"waitForBizCriteriaToLoad",function(){var t=(0,r.Z)(d().mark((function t(e,n,r){var a,o,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,v.Ct)(r),o=i.getLoadAdSettings(e,n),(0,U.f_)("Monetization inunit - waiting for biz criteria to load",o),t.next=5,(0,St.Xg)(a.wrapper,o);case 5:return s=t.sent,t.next=8,(0,f.jS)(r,o);case 8:return t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()),(0,o.Z)(this,"killAdWhenVideoIsPlaying",(function(t){(0,U.f_)("Monetization - for ".concat(t.interactionId," in unit display - video ad is active, destroying display ad ")),(0,V.rp)(i.displayProvider.NAME)?(0,V.N9)():i.killDisplayAd(t,"VIDEO_AD_IN_BG")})),(0,o.Z)(this,"startDisplayNative",function(){var t=(0,r.Z)(d().mark((function t(e){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.isAdActive(Rt)){t.next=3;break}return i.killAdWhenVideoIsPlaying(e),t.abrupt("return");case 3:if((null==(n=i.getLoadAdSettings(i.displaySettings,0))?void 0:n.type)!==h.dI.VIEW){t.next=7;break}return t.next=7,(0,St.bT)();case 7:i.displayProvider.initNativeAd(!1,"inUnit");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startDisplayWeb",function(){var t=(0,r.Z)(d().mark((function t(e,n){var r,a,o,s,c,l,p,v,f,h,m,y,g,b,I,A,Z,k,D,P;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i.firstDisplayRequest=void 0===i.firstDisplayRequest,(0,U.f_)("Monetization - for ".concat(e.interactionId," in unit display - waiting for biz criteria to load")),t.next=5,i.waitForBizCriteriaToLoad(i.displaySettings,i.numberOfDisplayImpressions,n);case 5:return a=t.sent,i.displayContainer||i.displayProvider.shouldRefreshContainerId()||(o=e.getModel(),s=o.title,c=i.displayProvider.shouldRefreshContainerId()?z.Z.id():i.id,l=Pt(c,Nt,i.translation,s),p=l.adContainer,i.displayContainer=p,e.wrapper.appendChild(i.displayContainer)),v=i.displayContainer.firstChild.firstChild,f=i.displayContainer.lastChild,(0,U.f_)("Monetization - for ".concat(e.interactionId," in unit display - creating countdown indicator")),t.next=12,i.showCountdown(e,i.translation);case 12:if(!i.isAdActive(Rt)){t.next=17;break}return i.killAdWhenVideoIsPlaying(e),a(),i.adFinished(Nt),t.abrupt("return");case 17:return i.trackEvent(F.C.PLAYER_MON_LOADING_PENDING,Nt),(0,U.f_)("Monetization - for ".concat(e.interactionId," in unit display - loading the player ")),t.next=21,i.displayProvider.load(v.id,n);case 21:if((0,U.i9)("Monetization - for ".concat(e.interactionId," in unit display - loading player success ")),i.trackEvent(F.C.PLAYER_MON_LOADING_PASS,Nt),!i.isAdActive(Rt)){t.next=28;break}return i.killAdWhenVideoIsPlaying(e),a(),i.adFinished(Nt),t.abrupt("return");case 28:return h=n instanceof u.default,i.trackEvent(F.C.PLAYER_MON_IMPRESSION_PENDING,Nt),(0,U.f_)("Monetization - for ".concat(e.interactionId," in unit display - sending an impression request")),t.prev=31,t.next=34,i.displayProvider.waitForImpression();case 34:m=t.sent,y=m.bidder,g=m.cpm,(0,U.i9)("Monetization - for ".concat(e.interactionId," in unit display - received an impression")),i.trackEvent(F.C.PLAYER_MON_IMPRESSION,Nt,y,g),t.next=48;break;case 41:return t.prev=41,t.t0=t.catch(31),(0,U.ur)(t.t0.message),a(),i.adFinished(Nt),i.killDisplayAd(e,"RUNTIME_ERROR"),t.abrupt("return");case 48:if(!i.isAdActive(Rt)){t.next=54;break}return(0,U.f_)("Monetization - for ".concat(e.interactionId," in unit display - video ad is active, destroying display ad ")),i.killAdWhenVideoIsPlaying(e),a(),i.adFinished(Nt),t.abrupt("return");case 54:return(0,U.f_)("Monetization - for ".concat(e.interactionId," in unit display - removing loading indicator")),wt(h,i.displayContainer,e,v,Nt),i.trackEvent(F.C.PLAYER_MON_PLAYING,Nt),i.notifyMonetizationStateToPlayer(e,!0),b=(null===(r=i.displaySettings)||void 0===r?void 0:r.timeInView)||8e3,Zt(f,{progressTime:b}),I=new Promise((function(t){var e=setTimeout((function(){clearTimeout(e),t()}),b)})),A=_t(i.displayContainer),Z=i.waitForDisplayAdInterrupt(),(0,U.f_)("Monetization - for ".concat(e.interactionId," in unit display - waiting for ").concat(b," in view, or close button to be clicked")),t.next=66,Promise.race([I,A,Z]);case 66:k=t.sent,D=(k||{}).adSkipped,P=D?"END":"SKIP",(0,U.f_)("Monetization - for ".concat(e.interactionId," in unit display - ad finished playing due to ").concat(P)),i.killDisplayAd(e,P),a(),i.numberOfDisplayImpressions+=1,i.adFinished(Nt),t.next=80;break;case 76:t.prev=76,t.t1=t.catch(0),i.killDisplayAd(e,"RUNTIME_ERROR"),(0,U.ur)(t.t1.message);case 80:case"end":return t.stop()}}),t,null,[[0,76],[31,41]])})));return function(e,n){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startDisplay",function(){var t=(0,r.Z)(d().mark((function t(e){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,v.Ct)(e),i.displayProvider&&n){t.next=3;break}return t.abrupt("return");case 3:if(!(0,V.rp)(i.displayProvider.NAME)){t.next=7;break}return t.next=6,i.startDisplayNative(n);case 6:return t.abrupt("return");case 7:return t.next=9,i.startDisplayWeb(n,e);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startNativeVideo",(0,r.Z)(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null==(e=i.getLoadAdSettings(i.videoSettings,0))?void 0:e.type)!==h.dI.VIEW){t.next=4;break}return t.next=4,(0,St.bT)();case 4:i.videoProvider.initNativeAd(!1,"inUnitVideo");case 5:case"end":return t.stop()}}),t)})))),(0,o.Z)(this,"startVideoWeb",function(){var t=(0,r.Z)(d().mark((function t(e){var n,r,a,o,s,c,l,p,f,h,m,y,g,b,I,A,Z,k;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=(0,v.Ct)(e),i.videoProvider&&o){t.next=4;break}return t.abrupt("return");case 4:return i.firstVideoRequest=void 0===i.firstVideoRequest,(0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - waiting for biz criteria to load")),t.next=8,i.waitForBizCriteriaToLoad(i.videoSettings,i.numberOfVideoImpressions,e);case 8:return s=t.sent,(0,U.i9)("Monetization - for ".concat(o.interactionId," in unit video - biz criteria met, loading...")),i.videoContainer||(c=o.getModel(),l=c.title,p=Pt(i.id,Rt,i.translation,l),f=p.adContainer,h=p.embedElement,i.videoContainer=f,i.embedVideoElementId=h.id,o.wrapper.appendChild(i.videoContainer)),(0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - creating countdown indicator")),t.next=14,i.showCountdown(o,i.translation);case 14:if(i.trackEvent(F.C.PLAYER_MON_LOADING_PENDING,Rt),(0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - loading video player and sending impression request")),!i.isAdActive(Nt)){t.next=20;break}return(0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - waiting for display ad to finish..")),t.next=20,i.onAdFinished();case 20:return t.next=22,i.videoProvider.load(i.embedVideoElementId);case 22:return m=t.sent,(0,U.i9)("Monetization - for ".concat(o.interactionId," in unit video - finished loading video player")),i.trackEvent(F.C.PLAYER_MON_LOADING_PASS,Rt),i.trackEvent(F.C.PLAYER_MON_IMPRESSION_PENDING,Rt),t.next=28,i.videoProvider.waitForImpression();case 28:return(0,U.i9)("Monetization - for ".concat(o.interactionId," in unit video - received impression")),(0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - ad finished playing, cleaning loading indicator..")),i.trackEvent(F.C.PLAYER_MON_IMPRESSION,Rt),i.isAdActive(Nt)&&((0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - killing active display ad..")),i.killAdWhenVideoIsPlaying(o)),(0,V.N9)(),(0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - resizing video")),y=(null===(n=i.videoSettings)||void 0===n?void 0:n.idle)||{},g=y.skipTimer,wt(e instanceof u.default,i.videoContainer,o,null===(r=i.videoContainer.firstChild)||void 0===r?void 0:r.firstChild,Rt,g),i.resizeVideo(e),i.trackEvent(F.C.PLAYER_MON_PLAYING,Rt),i.notifyMonetizationStateToPlayer(o,!0),b=_t(i.videoContainer),I=i.videoProvider.play(m),t.next=43,Promise.race([I,b]);case 43:A=t.sent,Z="end"===A?"END":"SKIP",(0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - video finished playing due to ").concat(Z)),s(),(0,U.f_)("Monetization - for ".concat(o.interactionId," in unit video - destroying the video ad player")),i.killVideoAd(o,m,Z),i.numberOfVideoImpressions+=1,i.adFinished(Rt),k=(null===(a=i.videoSettings)||void 0===a?void 0:a.playerOption)||{},k.useProviderSettings&&i.startVideoWeb(e),t.next=58;break;case 55:t.prev=55,t.t0=t.catch(0),(0,U.ur)(t.t0.message);case 58:case"end":return t.stop()}}),t,null,[[0,55]])})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"getCampaignId",(function(){return i.campaignId})),(0,o.Z)(this,"getReason",(function(t){return i.apesterElement.isUserEngaged?"MIDROLL":(t===Nt?i.firstDisplayRequest:i.firstVideoRequest)?"IDLE":"IDLE_LOOP"})),(0,o.Z)(this,"replaceEventTracker",(function(t){i.eventTracker=t})),(0,o.Z)(this,"trackEvent",(function(t,e,n,r,a){var o,s,d=e===Nt?i.displayProvider.NAME:i.videoProvider.NAME;if(e===Rt){var c=i.videoAdSize||{},u=c.width,l=c.height;s=u&&l?"".concat(u," x ").concat(l):void 0}var p=Mt({reason:a||i.getReason(e),monSize:s,monType:d,monBidder:null!=n?"".concat(n):n,monProvider:e,videoCampaignId:i.campaignId,displayCustomParamFloat:null!=r?"".concat(r):r},i.abTestReportData);null===(o=i.eventTracker)||void 0===o||o.sendMonetizationEvent(t,p)})),this.id=z.Z.id(),this.numberOfVideoImpressions=0,this.numberOfDisplayImpressions=0,this.campaignId=n,this.interruptDisplayAdListeners=[],this.apesterElement=e,this.eventTracker=this.apesterElement.getEventTracker()}var e,n;return(0,c.Z)(t,[{key:"adFinished",value:function(t){t===h.Z9.VA&&(0,V.RO)(),this.adFinishedListeners&&(this.adFinishedListeners.forEach((function(e){e(t)})),this.adFinishedListeners=[])}},{key:"onAdFinished",value:(n=(0,r.Z)(d().mark((function t(){var e=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.adFinishedListeners.push((function(e){t(e)}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"init",value:(e=(0,r.Z)(d().mark((function t(e){var n,i,r,a,o,s,c,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.apesterElement.getModel()){t.next=3;break}return t.abrupt("return");case 3:return i=n.language,r=n.campaignData,s=(o=a=e||r).testVideoCampaign,c=o.videoCampaignOptions,this.abTestReportData={a_b_test:s||"",apester_campaign_id:s&&null!=c&&c.originalVideoCampaignId?c.originalVideoCampaignId:"",custom1:s?h.YD.IS_A_B:""},u={a_b_test:s||"",apester_campaign_id:this.campaignId,ad_unit_position:Nt},this.videoSettings=N(this.apesterElement,a),t.next=11,(0,f.VH)(Rt,this.videoSettings,this.apesterElement,this.campaignId);case 11:return this.videoProvider=t.sent,this.displaySettings=R(this.apesterElement,Mt(Mt({},a),{},{providerReportData:u})),t.next=15,(0,f.VH)(Nt,this.displaySettings,this.apesterElement,this.campaignId);case 15:this.displayProvider=t.sent,this.translation=j(this.apesterElement.publisher.publisherId,i);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),Vt=n(2907);function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Bt=function(){function t(e,n){var i=this;(0,a.Z)(this,t),(0,o.Z)(this,"provider",void 0),(0,o.Z)(this,"campaignId",void 0),(0,o.Z)(this,"apesterElement",void 0),(0,o.Z)(this,"id",void 0),(0,o.Z)(this,"container",void 0),(0,o.Z)(this,"settings",void 0),(0,o.Z)(this,"isCompanionVariant",void 0),(0,o.Z)(this,"isNativeAd",void 0),(0,o.Z)(this,"unfillCounter",0),(0,o.Z)(this,"eventTracker",void 0),(0,o.Z)(this,"displayRequests",0),(0,o.Z)(this,"monProvider",void 0),(0,o.Z)(this,"abTestReportData",void 0),(0,o.Z)(this,"increaseUnfill",(function(){i.unfillCounter+=1})),(0,o.Z)(this,"resetUnfill",(function(){i.unfillCounter=0})),(0,o.Z)(this,"postHasBottomAd",(function(t){if(i.provider&&!i.isCompanionVariant){var e={type:"has_bottom_ad",adHeight:50};t.sendMessage(e)}})),(0,o.Z)(this,"setFullscreen",(function(){var t,e;i.isNativeAd||(null===(e=i.container)||void 0===e||e.classList.add("fullscreen"));null===(t=i.container)||void 0===t||t.style.setProperty("display","block")})),(0,o.Z)(this,"removeFullscreen",(function(t){var e,n;i.isNativeAd||(null===(e=i.container)||void 0===e||e.classList.remove("fullscreen"));t&&(null===(n=i.container)||void 0===n||n.remove())})),(0,o.Z)(this,"getTriggerType",(function(){return i.displayRequests>1?"refresh":"start"})),(0,o.Z)(this,"waitForBizCriteriaToLoad",function(){var t=(0,r.Z)(d().mark((function t(e,n,i){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,St.Xg)(i,e);case 2:return r=t.sent,t.next=5,(0,f.jS)(n,e);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()),(0,o.Z)(this,"getLoadAdSettings",(function(t){var e=i.settings.loadAdOn;return 0===t?e.preRollSettings:e.midRollSettings})),(0,o.Z)(this,"loadBottomAd",function(){var t=(0,r.Z)(d().mark((function t(e){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.isNativeAd){t.next=11;break}return n=i.provider.shouldRefreshContainerId()?z.Z.id():i.id,i.container=(a=!!i.isCompanionVariant,o=n,s=void 0,d=void 0,s=document.createElement("div"),d=a?"companion-bottom-ad":"bottom-ad-container",s.id="apester-bottom-ad-".concat(o),s.classList.add(d),s),i.isCompanionVariant?e.wrapper.after(i.container):e.wrapper.appendChild(i.container),r=i.getLoadAdSettings(i.displayRequests),(0,U.f_)("Bottom ad loadAdSettings - ".concat(n),r),t.next=8,i.waitForBizCriteriaToLoad(r,i.apesterElement,i.container);case 8:(0,t.sent)(),(0,U.i9)("Bottom ad biz criteria to load is passed - ".concat(n));case 11:case"end":return t.stop()}var a,o,s,d}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startWebBottomAd",function(){var t=(0,r.Z)(d().mark((function t(e){var n,r,a,o,s,c,u,l;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.trackEvent(F.C.PLAYER_MON_LOADING_PENDING),(0,U.f_)("Bottom ad waiting for provider to load - ".concat(null===(n=i.container)||void 0===n?void 0:n.id)),t.next=4,i.provider.load(null===(r=i.container)||void 0===r?void 0:r.id,e,!0);case 4:return(0,U.i9)("Bottom ad provider loaded - ".concat(null===(a=i.container)||void 0===a?void 0:a.id)),i.trackEvent(F.C.PLAYER_MON_LOADING_PASS),i.displayRequests+=1,i.trackEvent(F.C.PLAYER_MON_IMPRESSION_PENDING),(0,U.f_)("Bottom ad - waiting for impression"),t.next=11,i.provider.waitForImpression("bottom ad");case 11:return o=t.sent,s=o.bidder,c=o.cpm,t.next=16,i.checkIsAdExists();case 16:t.sent?((0,U.i9)("Bottom ad - received an impression"),i.trackEvent(F.C.PLAYER_MON_IMPRESSION,s,c),null===(u=i.container)||void 0===u||u.classList.add("de"===e.lang?"lang-de":"lang-en")):((0,U.ur)("Bottom ad is empty - ".concat(null===(l=i.container)||void 0===l?void 0:l.id)),i.trackEvent(F.C.PLAYER_MON_LOADING_FAILED),i.killDisplayAd()),i.resetUnfill();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"start",function(){var t=(0,r.Z)(d().mark((function t(e,n){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.provider){t.next=2;break}return t.abrupt("return");case 2:if(i.isCompanionVariant=(0,Vt.u3)(n),i.postHasBottomAd(e),!i.isNativeAd){t.next=11;break}if((null==(r=i.getLoadAdSettings(i.displayRequests))?void 0:r.type)!==h.dI.VIEW){t.next=9;break}return t.next=9,(0,St.bT)();case 9:return i.provider.initNativeAd(i.isCompanionVariant,"bottom"),t.abrupt("return");case 11:return t.abrupt("return",i.startWebBottomAd(e));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,o.Z)(this,"replaceEventTracker",(function(t){i.eventTracker=t})),(0,o.Z)(this,"checkIsAdExists",(0,r.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var e=5;!function n(){var r,a;if(!i.container||null!==(r=i.container)&&void 0!==r&&null!==(a=r.children[0])&&void 0!==a&&a.clientHeight)t(!0);else{if(--e)return setTimeout(n,1e3);t(!1)}}()})));case 1:case"end":return t.stop()}}),t)})))),(0,o.Z)(this,"killDisplayAd",(function(){var t,e;null===(t=i.provider)||void 0===t||t.destroy(null===(e=i.container)||void 0===e?void 0:e.id)})),(0,o.Z)(this,"trackEvent",(function(t,e,n){var r,a=(0,q.Yx)(Ut({monType:i.provider.NAME,monBidder:null!=e?"".concat(e):e,monProvider:i.monProvider,monTriggerType:i.getTriggerType(),videoCampaignId:i.campaignId,displayCustomParamFloat:null!=n?"".concat(n):n},i.abTestReportData));null===(r=i.eventTracker)||void 0===r||r.sendMonetizationEvent(t,a)})),this.id=z.Z.id(),this.campaignId=n,this.apesterElement=e,this.eventTracker=this.apesterElement.getEventTracker(),this.monProvider="da_bottom"}var e;return(0,c.Z)(t,[{key:"init",value:(e=(0,r.Z)(d().mark((function t(e){var n,i,r,a,o,s,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.apesterElement.getModel()){t.next=3;break}return t.abrupt("return");case 3:if(i=e||n.campaignData,a=(r=i||{}).bottomAdOptions,o=r.testVideoCampaign,s=r.videoCampaignOptions,a&&a.enabled){t.next=7;break}return t.abrupt("return");case 7:return this.abTestReportData={a_b_test:o||"",apester_campaign_id:o&&null!=s&&s.originalVideoCampaignId?s.originalVideoCampaignId:"",custom1:o?h.YD.IS_A_B:""},c={a_b_test:o||"",apester_campaign_id:this.campaignId,ad_unit_position:this.monProvider},this.settings=(0,Vt.q5)(Ut(Ut({},i),{},{providerReportData:c})),t.next=12,(0,f.VH)(h.Z9.DA,this.settings,this.apesterElement,this.campaignId);case 12:this.provider=t.sent,this.isNativeAd=(0,V.rp)(this.settings.type);case 14:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),jt=(n(1249),n(2023),"apester-companion-video");function qt(t,e){var n=t;n.classList.add("show");var r=(0,i.Z)(e,2),a=r[0],o=r[1];return n.style.width="".concat(a,"px"),n.style.height="".concat(o,"px"),n}function Wt(t){var e=t;e.classList.remove("show"),e.style.removeProperty("width"),e.style.removeProperty("height")}function Gt(t,e){var n;if(e)for(n in e)t.style.setProperty(n,e[n])}function Yt(t,e,n){var r=(0,i.Z)(n,2),a=r[0],o=r[1];if(t.style.height="".concat(o,"px"),t.querySelector("img"))return t;var s=document.createElement("img");return s.classList.add("backfill-image"),s.src=function(t,e,n){return"".concat("http://img.apester.com","/insecure/fit/").concat(2*e,"/").concat(2*n,"/ce/0/plain/").concat(encodeURIComponent(t))}(e,a,o),s.setAttribute("style","width: ".concat(a,"px; height: ").concat(o,"px;")),t.appendChild(s),t}function Ht(t,e){var n=document.createElement("div");return"floating"===t?(n.id=p.Z.isMobile?"apester-floating-video-mobile":"apester-floating-video",n):(n.id="".concat(jt,"-").concat(t),e&&(n.id+="-".concat(e)),n.classList.add("companion","container-video"),n)}function Kt(t,e){return t.style.setProperty("margin","".concat(m.oN,"px auto ").concat(m.oN,"px")),Gt(t,e),t}var Xt=function(t,e,n){return Kt(Ht(e,t),n)},Jt=function(t,e,n,i,r){return qt(Yt(Kt(function(t,e){var n=document.createElement("div");return n.id="".concat(jt,"-").concat(e),n.classList.add("companion","video-player-container"),t.appendChild(n),t}(Ht(e),t),r),n,i),i)};function Qt(t,e){if(t.style.marginTop="".concat(m.oN,"px"),t.style.marginBottom="".concat(m.oN,"px"),e){var n=(0,i.Z)(e,2)[1];t.style.height="".concat(n,"px")}return t}var $t=function(t){var e=t.querySelector("img");e&&(e.style.opacity="0")},te=function(t){var e=t.querySelector("img");e&&(e.style.opacity="1")};function ee(t,e,n){var i=document.createElement("div");return i.id="".concat("apester-companion-display","-").concat(e,"-").concat(t),Gt(i,n),i.classList.add("companion","container-display","container-display-".concat(e)),i}function ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var re={da:0,da_left:0,da_right:0,da_below:0,va:0,va_below:0},ae=function(){function t(e,n,s){var c=this;(0,a.Z)(this,t),(0,o.Z)(this,"videoProvider",void 0),(0,o.Z)(this,"displayProvider",void 0),(0,o.Z)(this,"displayLeftProvider",void 0),(0,o.Z)(this,"displayRightProvider",void 0),(0,o.Z)(this,"campaignId",void 0),(0,o.Z)(this,"monetizationId",void 0),(0,o.Z)(this,"apesterElement",void 0),(0,o.Z)(this,"refreshOnClick",void 0),(0,o.Z)(this,"videoPlayers",void 0),(0,o.Z)(this,"settings",void 0),(0,o.Z)(this,"providers",void 0),(0,o.Z)(this,"containers",void 0),(0,o.Z)(this,"unfill",void 0),(0,o.Z)(this,"adRequests",void 0),(0,o.Z)(this,"firstRequests",void 0),(0,o.Z)(this,"adImpressions",void 0),(0,o.Z)(this,"adStyles",void 0),(0,o.Z)(this,"videoAdSize",void 0),(0,o.Z)(this,"eventTracker",void 0),(0,o.Z)(this,"belowBackfillImage",void 0),(0,o.Z)(this,"aboveBackfillImage",void 0),(0,o.Z)(this,"monProvider",void 0),(0,o.Z)(this,"awaitForVideoToFinish",void 0),(0,o.Z)(this,"awaitForDisplayToFinish",void 0),(0,o.Z)(this,"isDisplayAdDestroyed",void 0),(0,o.Z)(this,"isDisplayAdLoaded",void 0),(0,o.Z)(this,"asideAds",void 0),(0,o.Z)(this,"abTestReportData",void 0),(0,o.Z)(this,"checkAsideAdsPossibilityAndPrepareStyling",(function(){var t,e,n={hasLeftAd:!1,hasRightAd:!1},i=c.apesterElement.wrapper,r=i.querySelector("iframe"),a=r.offsetWidth,o=c.apesterElement.container.offsetWidth,s=E(c.settings,h.Z9.DA_LEFT)||(null===(t=c.settings[h.Z9.DA_LEFT])||void 0===t?void 0:t.sizes),d=s?s[s.length-1][0]:0,u=o>=m.rw+d+m.Dh,l=E(c.settings,h.Z9.DA_RIGHT)||(null===(e=c.settings[h.Z9.DA_RIGHT])||void 0===e?void 0:e.sizes),p=l?l[l.length-1][0]:0,v=o>=m.rw+(d?d+m.Dh:0)+p+m.Dh;if(!u&&!v)return n;var f=0,y=0,g=0,b=0;u&&d&&(f+=y=d+m.Dh,n.hasLeftAd=!0),v&&p&&(f+=g=p+m.Dh,n.hasRightAd=!0),(0,U.f_)("Checking aside ads possibility:",{apesterContainerWidth:o,asideAdsWidth:f,iframeWidth:a,leftAdWidth:d,rightAdWidth:p});var I=o-f-a;I<0?r.style.minWidth="".concat(o-f,"px"):b=I/2;var A="".concat(g+b,"px"),Z="".concat(y+b,"px"),k="0 ".concat(A," 0 ").concat(Z);return c.adStyles[h.Z9.DA_RIGHT]={right:"-".concat(g,"px"),"max-width":"".concat(p,"px"),width:"".concat(p,"px")},c.adStyles[h.Z9.DA_LEFT]={left:"-".concat(y,"px"),"max-width":"".concat(d,"px"),width:"".concat(d,"px")},c.adStyles[h.Z9.DA]={"max-width":"".concat(o-f-2*b,"px"),"margin-left":Z,"margin-right":A},c.adStyles[h.Z9.VA]={"max-width":"".concat(o-f-2*b,"px"),"margin-left":Z,"margin-right":A},i.setAttribute("style","margin: ".concat(k,"; width: ").concat(o-f-2*b,"px")),n})),(0,o.Z)(this,"checkAsideAdAndApesterElementHeights",(function(t){var e=c.apesterElement.wrapper.parentElement;e&&(t.offsetHeight>e.offsetHeight?e.style.height="".concat(t.offsetHeight,"px"):e.style.height&&(e.style.height="null"))})),(0,o.Z)(this,"replaceEventTracker",(function(t){c.eventTracker=t})),(0,o.Z)(this,"increaseDisplayedCount",(function(t){c.adRequests[t]+=1})),(0,o.Z)(this,"increaseImpressionCount",(function(t){c.adImpressions[t]+=1})),(0,o.Z)(this,"increaseUnfill",(function(t){c.unfill[t]+=1})),(0,o.Z)(this,"resetUnfill",(function(t){c.unfill[t]=0})),(0,o.Z)(this,"attachCompanion",(function(t,e,n){var i,r=t instanceof u.default,a=r?t.container:t.wrapper;if(r||null==a||null===(i=a.parentElement)||void 0===i||!i.querySelector("#".concat(e.id)))if("below"===n||"floating"===n){var o;null==a||null===(o=a.parentElement)||void 0===o||o.append(e)}else{var s,d=r?t.container:t.wrapper;null==a||null===(s=a.parentElement)||void 0===s||s.insertBefore(e,d)}})),(0,o.Z)(this,"attachAsideCompanion",(function(t,e){t.wrapper.append(e)})),(0,o.Z)(this,"getLoadStrategy",(function(t){var e=c.attachCompanion;if(t===h.Z9.DA_LEFT||t===h.Z9.DA_RIGHT){var n;c.containers[t]=function(t,e,n){var i=document.createElement("div");return i.id="".concat(t?"apester-companion-display-left":"apester-companion-display-right","-").concat(e),Gt(i,n),i.classList.add("companion",t?"container-display-left":"container-display-right"),i}(t===h.Z9.DA_LEFT,c.monetizationId,null===(n=c.adStyles)||void 0===n?void 0:n[t]),e=c.attachAsideCompanion}else{var r,a,o,s,d=c.settings[t].sizes,u=void 0===d?[]:d,l=t===h.Z9.DA?"above":"below";c.settings[t].displayAdLocation=l;var p="below"===l?c.belowBackfillImage:c.aboveBackfillImage,v=null!==(r=u.sort((function(t,e){return(0,i.Z)(t,2)[1]-(0,i.Z)(e,2)[1]}))[u.length-1])&&void 0!==r?r:[300,250];(a=c.containers)[t]||(a[t]=p?function(t,e,n,i,r){return Yt(Qt(ee(t,e,r),i),n,i)}(c.monetizationId,l,p,v,null===(o=c.adStyles)||void 0===o?void 0:o[h.Z9.DA]):function(t,e,n){return Qt(ee(t,e,n))}(c.monetizationId,l,null===(s=c.adStyles)||void 0===s?void 0:s[h.Z9.DA]))}return{displaySettings:c.settings[t],displayProvider:c.providers[t],displayImpressions:c.adImpressions[t],attachCompanion:e,displayContainer:c.containers[t]}})),(0,o.Z)(this,"loadDisplayByType",function(){var t=(0,r.Z)(d().mark((function t(e,n){var i,r,a,o,s,u,l,p,v,f;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.getLoadStrategy(e),r=i.displaySettings,a=i.displayContainer,o=i.displayImpressions,s=i.attachCompanion,u=i.displayProvider,l=r.loadAdOn,p=l.midRollSettings,v=l.preRollSettings,c.firstRequests[e]=void 0===c.firstRequests[e],s(n,a,e===h.Z9.DA?"above":"below"),f=o>0?p:v,t.next=7,c.waitForBizCriteriaToLoad(f,n,a);case 7:return(0,t.sent)(),c.trackEvent(F.C.PLAYER_MON_LOADING_PENDING,e),t.next=12,u.load(a.id,n,!0);case 12:c.trackEvent(F.C.PLAYER_MON_LOADING_PASS,e),e!==h.Z9.DA&&e!==h.Z9.DA_BELOW||(c.isDisplayAdLoaded[e]=!0);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startDisplayNative",(function(t){var e=c.providers[t];e&&e.initNativeAd(!1,"companion")})),(0,o.Z)(this,"startDisplayAd",function(){var t=(0,r.Z)(d().mark((function t(e){var n,i,a,o,s,u,l,p,v,f;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=c.getLoadStrategy(e),s=o.displaySettings,u=o.displayContainer,l=o.displayProvider,u&&l){t.next=3;break}return t.abrupt("return");case 3:if((0,U.f_)("Call companion display ".concat(e," - ").concat(l.NAME)),!((null==s||null===(n=s.loadAdOn)||void 0===n||null===(i=n.midRollSettings)||void 0===i||null===(a=i.configuration)||void 0===a?void 0:a.refreshAdOn)||!1)){t.next=10;break}return t.next=8,(0,St.Xg)(u,{type:h.dI.VIEW});case 8:(0,t.sent)();case 10:if(p=[h.Z9.VA,h.Z9.VA_BELOW].map((function(t){var e;return null===(e=c.settings[t])||void 0===e?void 0:e.companionPosition})),!(v=s.displayAdLocation)||!p.includes(v)){t.next=19;break}return t.next=15,c.awaitForVideoToFinish[v];case 15:if(!c.isDisplayAdDestroyed[e]){t.next=19;break}return c.isDisplayAdDestroyed[e]=!1,t.next=19,l.load(u.id,c.apesterElement,!0);case 19:return f=v||"aside",c.awaitForDisplayToFinish[f]=new Promise((function(t){(0,r.Z)(d().mark((function n(){var i,r,a,o;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c.increaseDisplayedCount(e),c.trackEvent(F.C.PLAYER_MON_IMPRESSION_PENDING,e),te(u),n.next=6,l.waitForImpression();case 6:r=n.sent,a=r.cpm,o=r.bidder,$t(u),(0,U.i9)("companion display ".concat(e," - ").concat(l.NAME,", received an AD")),c.trackEvent(F.C.PLAYER_MON_IMPRESSION,e,o,a),c.resetUnfill(e),(i=u.style).height||(i.height="auto"),e!==h.Z9.DA_LEFT&&e!==h.Z9.DA_RIGHT||c.checkAsideAdAndApesterElementHeights(u),c.increaseImpressionCount(e),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),(0,U.ur)("Monetization companion start display ad - error",n.t0);case 21:return n.prev=21,t(),n.finish(21);case 24:case"end":return n.stop()}}),n,null,[[0,18,21,24]])})))()})),t.next=23,c.awaitForDisplayToFinish[f];case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"loadVideo",function(){var t=(0,r.Z)(d().mark((function t(e){var n,i,r,a,o,s,u,l,p,v,f,m,y,g,b,I,A,Z=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Z.length>1&&void 0!==Z[1]?Z[1]:h.Z9.VA,c.firstRequests[a]=void 0===c.firstRequests[a],c.videoAdSize=k(e),o=c.videoAdSize,s=o.width,u=o.height,l=(null===(n=c.settings[a])||void 0===n?void 0:n.companionPosition)||"above",p="below"===l?c.belowBackfillImage:c.aboveBackfillImage,v=p?Jt(c.monetizationId,l,p,[s,u],c.adStyles[h.Z9.VA]):Xt(c.monetizationId,l,c.adStyles[h.Z9.VA]),c.containers[a]=v,c.attachCompanion(e,v,l),f=c.settings[a],m=f.loadAdOn,y=m.midRollSettings,g=m.preRollSettings,b=f.playerOption.useProviderSettings,void 0!==b&&b){t.next=18;break}return I=c.adImpressions[a]?y:g,(0,U.f_)("Companion load video loadAdSettings",I),t.next=15,c.waitForBizCriteriaToLoad(I,e,v);case 15:(0,t.sent)(),(0,U.i9)("Companion biz criteria to load video is passed");case 18:return c.trackEvent(F.C.PLAYER_MON_LOADING_PENDING,a),A=p?null===(i=v.querySelector(".video-player-container"))||void 0===i?void 0:i.id:v.id,t.next=22,null===(r=c.providers[a])||void 0===r?void 0:r.load(A);case 22:c.videoPlayers[a]=t.sent,c.trackEvent(F.C.PLAYER_MON_LOADING_PASS,a);case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startVideoAd",function(){var t=(0,r.Z)(d().mark((function t(e,n){var i,a,o,s,u,l,p,v,f,m,y,g,b,I;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=null===(i=c.containers)||void 0===i?void 0:i[n],l=null===(a=c.providers)||void 0===a?void 0:a[n],p=null===(o=c.videoPlayers)||void 0===o?void 0:o[n],v=null===(s=c.settings)||void 0===s?void 0:s[n],u&&l&&p){t.next=3;break}return t.abrupt("return");case 3:return c.increaseDisplayedCount(n),m=(f=v||{}).companionPosition,y=f.playerOption,g=void 0===y?{}:y,I="below"===(b=m||"above")?c.belowBackfillImage:c.aboveBackfillImage,(0,U.f_)("Call companion video ad - ".concat(l.NAME)),c.trackEvent(F.C.PLAYER_MON_IMPRESSION_PENDING,n),t.next=11,l.waitForImpression(p);case 11:return c.awaitForVideoToFinish[b]=new Promise((function(t){(0,r.Z)(d().mark((function i(){var a,o,s,v,f,m,y,A,Z,D,P,_;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,(0,U.i9)("Companion video ad - ".concat(l.NAME,", received an AD")),c.trackEvent(F.C.PLAYER_MON_IMPRESSION,n),c.resetUnfill(n),[h.Z9.DA,h.Z9.DA_BELOW].forEach(function(){var t=(0,r.Z)(d().mark((function t(e){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(n=c.settings[e])||void 0===n?void 0:n.displayAdLocation)!==b){t.next=4;break}return t.next=3,c.awaitForDisplayToFinish[b];case 3:c.killAdWhenVideoIsPlaying(e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c.videoAdSize=k(e),null==l||l.resize(p,c.videoAdSize),o=k(e),s=o.width,v=o.height,qt(f=I&&null!==(a=u.querySelector(".video-player-container"))&&void 0!==a?a:u,[s,v]),null==l||l.resize(o),m=g.useProviderSettings,y=void 0!==m&&m,A=g.companion,Z=!y&&(null==A?void 0:A.shouldPauseWhenOutOfView),i.next=16,Z?(0,St.UJ)(u,{type:h.dI.LOAD,onEnter:function(){l.resume(p)},onExit:function(){l.pause(p)}},!0):function(){};case 16:return D=i.sent,i.next=19,l.play(p);case 19:P=i.sent,_="skip"===P?F.C.PLAYER_MON_SKIPPED:F.C.PLAYER_MON_STOPPED,c.trackEvent(_,n),Wt(f),c.increaseImpressionCount(n),D(),y&&c.startVideoAd(e,n),i.next=31;break;case 28:i.prev=28,i.t0=i.catch(0),(0,U.ur)("Monetization companion start video ad - error",i.t0);case 31:return i.prev=31,t(),i.finish(31);case 34:case"end":return i.stop()}}),i,null,[[0,28,31,34]])})))()})),t.next=14,c.awaitForVideoToFinish[b];case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,o.Z)(this,"getCampaignId",(function(){return c.campaignId})),(0,o.Z)(this,"killDisplayAd",(function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.Z9.DA,n=c.containers[e];n&&(null===(t=c.providers[e])||void 0===t||t.destroy(null==n?void 0:n.id),n.remove())})),(0,o.Z)(this,"killAdWhenVideoIsPlaying",(function(t){c.containers[t]&&!c.isDisplayAdDestroyed[t]&&c.isDisplayAdLoaded[t]&&(c.isDisplayAdDestroyed[t]=!0,(0,U.f_)("Monetization companion compete - video ad is active, destroying display ad"),c.killDisplayAd(t))})),(0,o.Z)(this,"killVideoAd",(function(t){var e,n;null===(e=c.containers[t])||void 0===e||e.remove(),c.videoPlayers[t]&&(null===(n=c.providers[t])||void 0===n||n.destroy(c.videoPlayers[t]))})),(0,o.Z)(this,"getTriggerType",(function(t){return c.adRequests[t]>1?"refresh":"start"})),(0,o.Z)(this,"getReason",(function(t){return c.apesterElement.isUserEngaged?"MIDROLL":c.firstRequests[t]?"IDLE":"IDLE_LOOP"})),(0,o.Z)(this,"getMonProvider",(function(t){var e=c.monProvider;return t===h.Z9.DA_LEFT?e="co_left":t===h.Z9.DA_RIGHT&&(e="co_right"),e})),(0,o.Z)(this,"trackEvent",(function(t,e,n,i){var r,a,o,s=null===(r=c.providers[e])||void 0===r?void 0:r.NAME;if(e===h.Z9.VA||e===h.Z9.VA_BELOW){var d=c.videoAdSize||{},u=d.width,l=d.height;o=u&&l?"".concat(u," x ").concat(l):void 0}var p=(0,q.Yx)(ie({reason:c.getReason(e),monSize:o,monType:s,monBidder:null!=n?"".concat(n):n,monProvider:c.getMonProvider(e),monTriggerType:c.getTriggerType(e),companionCampaignId:c.campaignId,companionCustomParam:null!=i?"".concat(i):i},c.abTestReportData));null===(a=c.eventTracker)||void 0===a||a.sendMonetizationEvent(t,p)})),this.monetizationId=s,this.campaignId=n,this.apesterElement=e,this.eventTracker=this.apesterElement.getEventTracker(),this.monProvider="co",this.awaitForVideoToFinish={above:new Promise((function(t){return t()})),below:new Promise((function(t){return t()})),floating:new Promise((function(t){return t()}))},this.awaitForDisplayToFinish={above:new Promise((function(t){return t()})),below:new Promise((function(t){return t()})),aside:new Promise((function(t){return t()}))},this.adStyles={},this.unfill=ie({},re),this.adRequests=ie({},re),this.firstRequests={},this.adImpressions=ie({},re),this.settings={},this.providers={},this.containers={},this.videoPlayers={},this.isDisplayAdDestroyed={},this.isDisplayAdLoaded={}}var e,n;return(0,c.Z)(t,[{key:"init",value:(n=(0,r.Z)(d().mark((function t(e){var n,i,a,o,s,c,u,l,p,v,m,y,g,b,I=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.apesterElement.getModel()){t.next=3;break}return t.abrupt("return");case 3:return i=e||n.campaignData,o=(a=i).testCompanionCampaign,s=a.companionCampaignOptions,this.abTestReportData={a_b_test:o||"",apester_campaign_id:o&&null!=s&&s.originalCompanionCampaignId?s.originalCompanionCampaignId:"",custom1:o?h.YD.IS_A_B:""},c={a_b_test:o||"",apester_campaign_id:this.campaignId,ad_unit_position:this.monProvider},u=this.apesterElement.publisher.campaignSettings,l=(u=void 0===u?{}:u).companionAds,p=(l=void 0===l?{}:l).usePlaceholder,v=void 0!==p&&p,m=l.above,y=void 0===m?void 0:m,g=l.below,b=void 0===g?void 0:g,this.settings=x(this.apesterElement,ie(ie({},i),{},{providerReportData:c})),this.asideAds=this.checkAsideAdsPossibilityAndPrepareStyling(),this.settings=ie(ie({},this.settings),C(this.apesterElement,i)),t.next=17,Promise.all(Object.values(h.Z9).map(function(){var t=(0,r.Z)(d().mark((function t(e){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.VH)(e,I.settings[e],I.apesterElement,I.campaignId);case 2:I.providers[e]=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:v&&(this.belowBackfillImage=b,this.aboveBackfillImage=y);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"waitForBizCriteriaToLoad",value:(e=(0,r.Z)(d().mark((function t(e,n,i){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,St.Xg)(i,e);case 2:return r=t.sent,t.next=5,(0,f.jS)(n,e);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),function(t,n,i){return e.apply(this,arguments)})}]),t}(),oe=n(1615),se=function t(e,n,i,a,o){var s=!1;return[function(){var c=(0,r.Z)(d().mark((function r(){var c,u,l,p;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=i.idle,u=c.maxAds,l=c.requestTimeout,p=void 0===l?1:l,!(c.numOfRequests>=u)){r.next=10;break}return(0,U.f_)("Monetization ID un availble] ".concat(o===h.Z9.VA?"video":"display"," inunit loop  - finish loop call due to request limit")),r.next=6,(0,St.UJ)(n.container,{},!1);case 6:(0,r.sent)(),(0,U.f_)("Monetization ID un availble] ".concat(o===h.Z9.VA?"video":"display"," inunit loop  -  reset due to view")),c.numOfRequests=0;case 10:if(!s){r.next=12;break}return r.abrupt("return",{completed:!0});case 12:return c.numOfRequests+=1,r.prev=13,r.next=16,a(n);case 16:return r.next=18,(0,q.Vs)(1e3*p);case 18:r.next=24;break;case 20:r.prev=20,r.t0=r.catch(13),e.trackEvent(F.C.PLAYER_MON_LOADING_IMPRESSION_FAILED,o),(0,U.ur)(r.t0.message);case 24:return r.abrupt("return",t(e,n,i,a,o));case 25:case"end":return r.stop()}}),r,null,[[13,20]])})));return function(){return c.apply(this,arguments)}}()(),function(){s=!0}]},de=function(){var t=(0,r.Z)(d().mark((function t(e,n){var i,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.unfillCounter>=3)){t.next=8;break}return(0,U.ur)("Monetization ID un availble] bottom ad - finish loop call due to unfill limit"),t.next=4,(0,St.UJ)(e.container,{},!1);case 4:(0,t.sent)(),(0,U.f_)("Monetization ID un availble] bottom ad - reset loop call due to view"),n.resetUnfill();case 8:return r=null==n||null===(i=n.container)||void 0===i?void 0:i.id,t.prev=9,(0,U.f_)("Monetization ID ".concat(r," bottom ad - fetching an ad")),t.next=13,n.start(e,e.engineName);case 13:(0,U.i9)("Monetization ".concat(r," bottom ad - received an ad")),t.next=22;break;case 16:t.prev=16,t.t0=t.catch(9),(0,U.ur)("Monetization ID ".concat(r," bottom ad - didnt get an ad"),t.t0),n.trackEvent(F.C.PLAYER_MON_LOADING_IMPRESSION_FAILED),n.increaseUnfill(),n.killDisplayAd();case 22:return(0,U.f_)("Monetization ID ".concat(r," bottom ad - waiting for timeout to refresh - ").concat(3e4," ms")),t.next=25,(0,q.Vs)(3e4);case 25:return t.abrupt("return",de(e,n));case 26:case"end":return t.stop()}}),t,null,[[9,16]])})));return function(e,n){return t.apply(this,arguments)}}(),ce=function t(e){var s=this;(0,a.Z)(this,t),(0,o.Z)(this,"inUnit",void 0),(0,o.Z)(this,"companion",void 0),(0,o.Z)(this,"bottomAd",void 0),(0,o.Z)(this,"videoCampaignId",void 0),(0,o.Z)(this,"companionCampaignId",void 0),(0,o.Z)(this,"id",void 0),(0,o.Z)(this,"stopDisplayInunitLoop",void 0),(0,o.Z)(this,"stopVideoInunitLoop",void 0),(0,o.Z)(this,"campaignDataSimulation",void 0),(0,o.Z)(this,"setSimulatedCampaign",(0,r.Z)(d().mark((function t(){var e,n,i,r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.Ce)();case 2:if(s.campaignDataSimulation=t.sent,s.campaignDataSimulation){t.next=5;break}return t.abrupt("return");case 5:e=s.campaignDataSimulation||{},n=e.videoCampaignOptions,i=e.companionCampaignOptions,r=(n||{}).videoCampaignId,a=(i||{}).companionCampaignId,s.videoCampaignId=r||s.videoCampaignId,s.companionCampaignId=a||s.companionCampaignId;case 10:case"end":return t.stop()}}),t)})))),(0,o.Z)(this,"initAllAds",function(){var t=(0,r.Z)(d().mark((function t(e){var n,i,r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=null!==(n=e.attrs)&&void 0!==n&&n.stripItems?Promise.resolve(void 0):s.startCompanion(e),r=s.startInUnit(e),a=s.startBottomAd(e),t.abrupt("return",Promise.all([i,r,a]).catch((function(t){(0,U.ur)("Monetization ID ".concat(s.id," init ads failed"),t)})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"shouldStartVideoImmediately",(function(t){var e=t,n=e.type,i=e.playerOption.useProviderSettings;return n===l.Z.VIDAZOO||i})),(0,o.Z)(this,"getDisplayStrategy",(function(t){var e,n,i;return{settings:null===(e=s.companion)||void 0===e?void 0:e.settings[t],provider:null===(n=s.companion)||void 0===n?void 0:n.providers[t],displayLoop:function(e){return(0,oe.th)(s.companion,t,e)},killDisplay:(null===(i=s.companion)||void 0===i?void 0:i.killDisplayAd)||m.ZT}})),(0,o.Z)(this,"startDisplayCompanionWeb",function(){var t=(0,r.Z)(d().mark((function t(e,n){var i,r,a,o,c,u,l,p,v,f,h;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.companion){t.next=2;break}return t.abrupt("return");case 2:if(i=s.getDisplayStrategy(n),r=i.settings,a=i.provider,o=i.displayLoop,c=i.killDisplay,r&&a){t.next=5;break}return t.abrupt("return");case 5:return(0,U.f_)("Monetization ID ".concat(s.id," companion display ").concat(n," - starting companion"),r),u=r.companionRefresh,l=u.lockTime,p=u.refreshTime,v=u.refreshOnClick,t.prev=8,(0,U.f_)("Monetization ID ".concat(s.id," companion display ").concat(n," - requesting an ad")),t.next=12,s.companion.loadDisplayByType(n,e);case 12:t.next=19;break;case 14:return t.prev=14,t.t0=t.catch(8),s.companion.trackEvent(F.C.PLAYER_MON_LOADING_FAILED,n),(0,U.ur)("Monetization ID ".concat(s.id," companion display ").concat(n," - requesting an ad failed"),t.t0),t.abrupt("return");case 19:if(t.prev=19,!p){t.next=31;break}return(0,U.f_)("Monetization ID [".concat(s.id," companion display ").concat(n," - setting refresh")),t.next=24,o(p);case 24:f=t.sent,h=(f||{}).unfillLimit,(0,U.f_)("Monetization ID [".concat(s.id," companion display ").concat(n," \n          - loop completed due to unfill limit ").concat(h)),(0,U.f_)("Monetization ID ".concat(s.id," companion display ").concat(n," - destroying companion ad")),c(n),t.next=32;break;case 31:v&&((0,U.f_)("Monetization ID ".concat(s.id," companion display ").concat(n," - setting refresh on click")),s.companion.refreshOnClick={lockTime:l});case 32:t.next=37;break;case 34:t.prev=34,t.t1=t.catch(19),(0,U.ur)("Monetization ID [".concat(s.id," companion display ").concat(n," - refresh failed"),t.t1);case 37:case"end":return t.stop()}}),t,null,[[8,14],[19,34]])})));return function(e,n){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startDisplayCompanionNative",(function(t){if(s.companion)return s.companion.startDisplayNative(t)})),(0,o.Z)(this,"startDisplayCompanion",function(){var t=(0,r.Z)(d().mark((function t(e,n){var i,r,a,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.companion){t.next=2;break}return t.abrupt("return");case 2:if(i=s.getDisplayStrategy(n),r=i.settings,a=i.provider,r&&a){t.next=5;break}return t.abrupt("return");case 5:if(!(0,V.rp)(r.type)){t.next=10;break}if(o=(0,V.ln)(),!(o.sdkVersion.localeCompare("1.0.47",void 0,{numeric:!0,sensitivity:"base"})<0)){t.next=9;break}return t.abrupt("return");case 9:return t.abrupt("return",s.startDisplayCompanionNative(n));case 10:return t.abrupt("return",s.startDisplayCompanionWeb(e,n));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startVideoCompanion",function(){var t=(0,r.Z)(d().mark((function t(e,n){var i,r,a,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(i=s.companion)&&void 0!==i&&i.settings[n]&&s.companion.providers[n]){t.next=2;break}return t.abrupt("return");case 2:return(0,U.f_)("Monetization ID [".concat(s.id," companion video ").concat(n," - starting companion"),s.companion.settings[n]),t.prev=3,(0,U.f_)("Monetization ID [".concat(s.id," companion video ").concat(n," - requesting an ad")),t.next=7,s.companion.loadVideo(e,n);case 7:t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(3),s.companion.trackEvent(F.C.PLAYER_MON_LOADING_FAILED,n),(0,U.ur)("Monetization ID [".concat(s.id," companion video ").concat(n," - failed loading video ad"),t.t0),t.abrupt("return");case 14:if(!s.shouldStartVideoImmediately(null===(r=s.companion)||void 0===r?void 0:r.settings[n])){t.next=18;break}return(0,U.f_)("Monetization ID [".concat(s.id," companion video ").concat(n," - starting video")),s.companion.startVideoAd(e,n),t.abrupt("return");case 18:return t.prev=18,(0,U.f_)("Monetization ID [".concat(s.id," companion video - starting video loop")),t.next=22,(0,oe.pe)(e,s.companion,n);case 22:a=t.sent,(o=(a||{}).unfillLimit)&&(0,U.f_)("Monetization ID [".concat(s.id," companion video - loop completed due to unfill limit ").concat(o)),(0,U.f_)("Monetization ID [".concat(s.id," companion video - destroying video ad")),s.companion.killVideoAd(n),t.next=33;break;case 29:return t.prev=29,t.t1=t.catch(18),(0,U.ur)("Monetization ID [".concat(s.id," companion video - error while running loop"),t.t1),t.abrupt("return",Promise.reject());case 33:case"end":return t.stop()}}),t,null,[[3,9],[18,29]])})));return function(e,n){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startCompanion",function(){var t=(0,r.Z)(d().mark((function t(e){var n,i,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.companionCampaignId){t.next=2;break}return t.abrupt("return");case 2:return s.companion=new ae(e,s.companionCampaignId,s.id),t.next=5,s.companion.init(s.campaignDataSimulation);case 5:return n=s.companion.asideAds,i=n.hasLeftAd,r=n.hasRightAd,i&&s.startDisplayCompanion(e,h.Z9.DA_LEFT),r&&s.startDisplayCompanion(e,h.Z9.DA_RIGHT),s.startDisplayCompanion(e,h.Z9.DA),s.startDisplayCompanion(e,h.Z9.DA_BELOW),s.startVideoCompanion(e,h.Z9.VA),s.startVideoCompanion(e,h.Z9.VA_BELOW),t.abrupt("return",Promise.resolve());case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startBottomAd",function(){var t=(0,r.Z)(d().mark((function t(e){var n,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,v.Ct)(e)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(i=!(0,f.zm)(n,h.ZD.BOTTOM_AD),s.videoCampaignId&&!i){t.next=6;break}return t.abrupt("return",Promise.reject());case 6:return(0,U.f_)("Monetization ID [".concat(s.id," bottom ad - starting bottom ad")),s.bottomAd=new Bt(e,s.videoCampaignId),t.next=10,s.bottomAd.init(s.campaignDataSimulation);case 10:if(s.bottomAd.settings&&s.bottomAd.provider){t.next=12;break}return t.abrupt("return",Promise.reject());case 12:return t.prev=12,(0,U.f_)("Monetization ID [".concat(s.id," bottom ad - initialized")),t.next=16,s.bottomAd.loadBottomAd(n);case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(12),(0,U.f_)("Monetization ID [".concat(s.id," bottom ad - error while initialized")),t.abrupt("return",Promise.reject(t.t0));case 22:if(t.prev=22,(0,U.f_)("Monetization ID [".concat(s.id," bottom ad - starting loop calls")),V.VL){t.next=29;break}return t.next=27,de(n,s.bottomAd);case 27:t.next=31;break;case 29:return t.next=31,s.bottomAd.start(n,n.engineName);case 31:t.next=39;break;case 33:return t.prev=33,t.t1=t.catch(22),(0,U.ur)("Monetization ID [".concat(s.id," bottom ad - error while running loop"),t.t1),s.bottomAd.trackEvent(F.C.PLAYER_MON_LOADING_FAILED),s.bottomAd.killDisplayAd(),t.abrupt("return",Promise.reject(t.t1));case 39:return t.abrupt("return",Promise.resolve());case 40:case"end":return t.stop()}}),t,null,[[12,18],[22,33]])})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startInUnitDisplay",function(){var t=(0,r.Z)(d().mark((function t(e){var n,r,a,o,c,u,l,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=s.inUnit)&&void 0!==n&&n.displaySettings&&null!==(r=s.inUnit)&&void 0!==r&&r.displayProvider){t.next=2;break}return t.abrupt("return",Promise.reject());case 2:return(0,U.f_)("Monetization ID [".concat(s.id,"] in unit display - starting in unit display"),null===(a=s.inUnit)||void 0===a?void 0:a.displaySettings),t.prev=3,o=se(s.inUnit,e,s.inUnit.displaySettings,s.inUnit.startDisplay,h.Z9.DA),c=(0,i.Z)(o,2),u=c[0],l=c[1],s.stopDisplayInunitLoop=l,t.next=8,u;case 8:if(t.t0=t.sent,t.t0){t.next=11;break}t.t0={};case 11:p=t.t0,p.completed&&(s.inUnit.destroyAd(!0),(0,U.f_)("Monetization ID [".concat(s.id,"] in unit display - finished in unit display"))),t.next=21;break;case 16:return t.prev=16,t.t1=t.catch(3),s.inUnit.trackEvent(F.C.PLAYER_MON_LOADING_FAILED,h.Z9.DA),(0,U.ur)("Monetization ID [".concat(s.id,"] in unit display - error occurred, stopped display inunit"),t.t1),t.abrupt("return",Promise.reject(t.t1));case 21:return t.abrupt("return",Promise.resolve());case 22:case"end":return t.stop()}}),t,null,[[3,16]])})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startInUnitVideo",function(){var t=(0,r.Z)(d().mark((function t(e){var n,r,a,o,c,u,l,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=s.inUnit)&&void 0!==n&&n.videoSettings&&null!==(r=s.inUnit)&&void 0!==r&&r.videoProvider){t.next=2;break}return t.abrupt("return",Promise.reject());case 2:if((0,U.f_)("Monetization ID [".concat(s.id,"] in unit video - starting in unit video"),null===(a=s.inUnit)||void 0===a?void 0:a.videoSettings),!s.shouldStartVideoImmediately(s.inUnit.videoSettings)){t.next=6;break}return s.inUnit.startVideoWeb(e),t.abrupt("return");case 6:return t.prev=6,o=se(s.inUnit,e,s.inUnit.videoSettings,s.inUnit.startVideoWeb,h.Z9.VA),c=(0,i.Z)(o,2),u=c[0],l=c[1],s.stopVideoInunitLoop=l,t.next=11,u;case 11:if(t.t0=t.sent,t.t0){t.next=14;break}t.t0={};case 14:p=t.t0,p.completed&&(0,U.f_)("Monetization ID [".concat(s.id,"] in unit video - finished in unit video")),t.next=24;break;case 19:return t.prev=19,t.t1=t.catch(6),(0,U.ur)("Monetization ID [".concat(s.id,"] in unit video - error while running video"),t.t1),s.inUnit.trackEvent(F.C.PLAYER_MON_LOADING_FAILED,h.Z9.VA),t.abrupt("return",Promise.reject(t.t1));case 24:return t.abrupt("return",Promise.resolve());case 25:case"end":return t.stop()}}),t,null,[[6,19]])})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"startInUnitNativeVideo",(0,r.Z)(d().mark((function t(){var e,n,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(e=s.inUnit)&&void 0!==e&&e.videoSettings&&null!==(n=s.inUnit)&&void 0!==n&&n.videoProvider){t.next=2;break}return t.abrupt("return");case 2:(0,U.f_)("Monetization ID [".concat(s.id,"] in unit native video - starting in unit native video"),null===(i=s.inUnit)||void 0===i?void 0:i.videoSettings);try{s.inUnit.startNativeVideo()}catch(t){(0,U.ur)("Monetization ID [".concat(s.id,"] in unit native video - error while running video"),t)}case 4:case"end":return t.stop()}}),t)})))),(0,o.Z)(this,"startInUnit",function(){var t=(0,r.Z)(d().mark((function t(e){var n,i,r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,v.Ct)(e)){t.next=3;break}return t.abrupt("return");case 3:if(a=!(0,f.zm)(r,h.ZD.IN_UNIT),s.videoCampaignId&&!a){t.next=6;break}return t.abrupt("return");case 6:return s.inUnit=new zt(e,s.videoCampaignId),t.next=9,s.inUnit.init(s.campaignDataSimulation);case 9:s.startInUnitDisplay(e),(0,V.rp)(null===(n=s.inUnit)||void 0===n||null===(i=n.videoSettings)||void 0===i?void 0:i.type)?s.startInUnitNativeVideo():s.startInUnitVideo(e);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,o.Z)(this,"killInUnit",(function(t){if(t.linkedInteraction&&s.inUnit){(0,U.f_)("Monetization ID [".concat(s.id,"] in unit video and display - killing video and display due to strip close"));try{null!=s&&s.stopDisplayInunitLoop&&s.stopDisplayInunitLoop(),s.inUnit.killDisplayAd(t.linkedInteraction,"CLOSE_STRIP")}catch(t){(0,U.f_)("Monetization ID [".concat(s.id,"] in unit video - killing video had an error"))}try{null!=s&&s.stopVideoInunitLoop&&(null==s||s.stopVideoInunitLoop()),s.inUnit.killVideoAd(t.linkedInteraction,void 0,"CLOSE_STRIP")}catch(t){(0,U.f_)("Monetization ID [".concat(s.id,"] in unit display - killing display had an error"))}}})),(0,o.Z)(this,"setHasAdblock",function(){var t=(0,r.Z)(d().mark((function t(e){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(789).then(n.t.bind(n,7340,23));case 3:null==e||e.setHasAdblock(!1),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),null==e||e.setHasAdblock(!0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()),this.id=z.Z.id();var c=(e.getModel()||{}).campaignData||{},u=c.videoCampaignOptions,p=c.companionCampaignOptions,y=(u||{}).videoCampaignId;this.videoCampaignId=y;var g=(p||{}).companionCampaignId;this.companionCampaignId=g;var b=e.getEventTracker();if(this.setHasAdblock(b),(0,v.wr)(e)){var I=e.getModel().interactionId;(0,U.f_)("Initializing monetization for interaction id ".concat(I,"... with monetization id ").concat(this.id," "))}else(0,v.ZN)(e)&&(0,U.f_)("Initializing monetization for strip with token ".concat(null==e?void 0:e.publisherToken,"... with monetization id ").concat(this.id," "))}},4092:function(t,e,n){"use strict";n.d(e,{Ct:function(){return a},ZN:function(){return o},wr:function(){return s}});var i=n(967),r=n(2125),a=function(t){return t instanceof i.Z?t:t instanceof r.default?t.linkedInteraction:void 0},o=function(t){return t instanceof r.default},s=function(t){return t instanceof i.Z}}}]);