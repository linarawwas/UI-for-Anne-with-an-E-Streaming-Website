const LASSO_API="https://lasso.link",LASSO_LINK_CLICK="Lasso Link Click",LASSO_DISPLAY_BOX="Lasso Display Primary Click",LASSO_DISPLAY_BOX_2ND="Lasso Display Secondary Click",LASSO_INTERNAL="Internal Click",LASSO_EXTERNAL="External Click";function docReady(t){console.log(document.readyState),console.log(document.addEventListener),"complete"===document.readyState||"undefined"!=typeof lassoHtmlLoaded&&!0===lassoHtmlLoaded?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&t()}))}function sendEvent(t,e,a){const n=/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*:)*?:?0*1$/.test(location.hostname)||"file:"===location.protocol;if(!e.trackLocalhost&&n)return console.warn("[Lasso] Ignoring event because website is running locally");const o={n:t,u:e.url,d:e.domain,r:e.referrer,w:e.deviceWidth,h:e.hashMode?1:0,p:a&&a.props?a.props:void 0},s=new XMLHttpRequest;s.open("POST",e.apiHost+"/events/tracking",!0),s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify(o)),s.onreadystatechange=()=>{4===s.readyState&&a&&a.callback&&a.callback()}}function LassoTracking(t){return{trackEvent:(e,a,n)=>{sendEvent(e,Object.assign(Object.assign({},Object.assign({hashMode:!1,trackLocalhost:!1,url:location.href,domain:location.hostname,referrer:document.referrer||null,deviceWidth:window.innerWidth,apiHost:"https://lasso.link"},t)),n),a)}}}function getPageLoadTime(){let t=window.performance.getEntriesByType("navigation"),e=0;return t.length>=1&&void 0!==t[0].domContentLoadedEventEnd&&(e=parseInt(t[0].domContentLoadedEventEnd)),e}function initLassoTracking(){const t=LassoTracking({apiHost:LASSO_API});window.lstracking=window.lstracking||t;let e=document.getElementById("lasso-tracking");if(!e)return;let a=e.getAttribute("data-lssid"),n=e.getAttribute("data-lsid"),o={lssid:a,lsid:n,pid:e.getAttribute("data-pid"),ipa:e.getAttribute("data-ipa"),d:location.origin,plt:getPageLoadTime()};console.log("Lasso Tracking is ready!"),n&&a&&t.trackEvent("pageview",{props:o})}function sendClickEvent(t,e){let a=document.getElementById("lasso-tracking");if(!a)return;let n=a.getAttribute("data-lssid"),o=a.getAttribute("data-lsid"),s={lssid:n,lsid:o,pid:a.getAttribute("data-pid"),ipa:a.getAttribute("data-ipa"),d:location.origin};(t={...t,...s}).type=e,delete t.event_category,delete t.event_label,o&&n&&lstracking.trackEvent("click",{props:t})}docReady((function(){function t(t){let e=t.getAttribute("data-lasso-box-trackable"),a=t.getAttribute("data-lasso-name"),n=t.getAttribute("href"),o=t.classList,s=LASSO_LINK_CLICK;return s="true"===e?o.contains("lasso-button-2")?LASSO_DISPLAY_BOX_2ND:LASSO_DISPLAY_BOX:a&&"true"!==e?LASSO_LINK_CLICK:0===n.indexOf(location.origin)?LASSO_INTERNAL:LASSO_EXTERNAL,s}console.log("Lasso GA is ready!"),"function"==typeof gtag?(console.log("Lasso GA function"),document.addEventListener("click",(function(e){let a=e.target;if("a"!=a.localName&&(a=a.closest("a")),null===a)return;let n=a.getAttribute("data-lasso-id"),o=a.getAttribute("data-lasso-name"),s=t(a),i=function(e){let a="",n=t(e);try{let t=e.closest(".lasso-display");n===LASSO_LINK_CLICK?a=e.innerText:n===LASSO_DISPLAY_BOX?a=t.querySelector(".lasso-button-1").innerText:n===LASSO_DISPLAY_BOX_2ND&&(a=t.querySelector(".lasso-button-2").innerText)}catch(t){a=""}return a}(a);if(i=i||o,i="string"==typeof i?i.trim():"","a"==a.localName&&n&&o){let t={lasso_title:o,lasso_href:a.getAttribute("href"),lasso_text:i,event_category:o,event_label:i};gtag("event",s,t),console.log("Lasso GA event sent: "+s+" || "+o),t.lasso_lid=n,sendClickEvent(t,s),console.log("Lasso event sent: "+s+" || "+o)}else if("a"==a.localName&&n){let t={lasso_title:"",lasso_href:a.getAttribute("href"),lasso_text:a.innerText};t.lasso_lid=n,sendClickEvent(t,s),console.log("Lasso event sent: "+s+" || "+o)}}))):"function"==typeof tag&&(console.log("Lasso GA click"),document.addEventListener("click",(function(e){let a=e.target;if("a"!=a.localName&&(a=a.closest("a")),null===a)return;let n=a.getAttribute("data-lasso-id"),o=a.getAttribute("data-lasso-name"),s=t(a);if("a"==a.localName&&n&&o){let t=a.getAttribute("href");void 0!==ga.getByName("LassoTracker")?(console.log("lasso ga with tracker"),ga("LassoTracker.send","event",o,s,t)):(console.log("lasso ga without tracker"),ga("send","event",o,s,t)),console.log("Lasso GA event sent")}}))),initLassoTracking()}));